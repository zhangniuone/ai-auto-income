<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="<%= article.meta_description || article.summary %>">
  <meta name="keywords" content="<%= article.keywords ? article.keywords.join(',') : '' %>">
  <meta property="og:title" content="<%= article.title %>">
  <meta property="og:description" content="<%= article.summary %>">
  <link rel="canonical" href="<%= process.env.SITE_URL || '' %>/article/<%= article.slug %>">
  <title><%= article.title %> - <%= siteName %></title>
  <link rel="stylesheet" href="/css/style.css">
  <% if (typeof googleAdsenseClient !== 'undefined' && googleAdsenseClient) { %>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=<%= googleAdsenseClient %>" crossorigin="anonymous"></script>
  <% } %>
</head>
<body>
  <header class="header">
    <div class="container">
      <a href="/" class="logo"><%= siteName %></a>
      <nav class="nav">
        <a href="/">首页</a>
        <a href="/category/<%= article.category %>"><%= article.category %></a>
      </nav>
    </div>
  </header>

  <main class="main container">
    <article class="article-full">
      <header class="article-header">
        <div class="article-categories">
          <% if (article.tags) { article.tags.forEach(function(tag) { %>
          <a href="/tag/<%= tag %>" class="tag"><%= tag %></a>
          <% }); } %>
        </div>
        
        <h1 class="article-title"><%= article.title %></h1>
        
        <div class="article-meta">
          <span><%= new Date(article.published_at || article.created_at).toLocaleDateString('zh-CN') %></span>
          <span><%= article.view_count || 0 %> 阅读</span>
        </div>
      </header>

      <!-- Top Ad -->
      <div class="ad-container">
        <% if (typeof googleAdsenseClient !== 'undefined' && googleAdsenseClient) { %>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="<%= googleAdsenseClient %>"
             data-ad-slot="1234567890"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        <% } %>
      </div>

      <div class="article-content">
        <%- article.content %>
      </div>

      <!-- Middle Ad -->
      <div class="ad-container">
        <% if (typeof baiduAdSlot !== 'undefined' && baiduAdSlot) { %>
        <script type="text/javascript">
          var cpro_id = "<%= baiduAdSlot %>";
        </script>
        <script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
        <% } %>
      </div>

      <!-- Related Articles -->
      <% if (related && related.length > 0) { %>
      <div class="related-articles">
        <h3>相关文章</h3>
        <div class="articles-grid">
          <% related.forEach(function(rel) { %>
          <article class="article-card">
            <a href="/article/<%= rel.slug %>" class="article-link">
              <h4 class="article-title"><%= rel.title %></h4>
              <p class="article-summary"><%= rel.summary ? rel.summary.slice(0, 100) + '...' : '' %></p>
            </a>
          </article>
          <% }); %>
        </div>
      </div>
      <% } %>

      <!-- Bottom Ad -->
      <div class="ad-container">
        <% if (typeof googleAdsenseClient !== 'undefined' && googleAdsenseClient) { %>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="<%= googleAdsenseClient %>"
             data-ad-slot="1234567890"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        <% } %>
      </div>
    </article>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 <%= siteName %>. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>